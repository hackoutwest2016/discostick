<template name="game">
  {{#if hasBegun}}

    {{#if isHost}}

      {{#if havePicked}}

        <h1>All done!</h1>

        {{ > player }}

      {{else}}
        <h1>Pick a song for {{displayName getFocusedUser._id}}</h1>
      {{/if}}

    {{else}}
      {{#if havePicked }}
        Great! Now we wait.
      {{else}}
        {{ > songPickView round}}
      {{/if}}
    {{/if}}

  {{else}}
    <h1>Welcome to this game!</h1>

    {{#each players}}
    	<li>{{profile.id}}</li>
    {{/each}}

    <p>
      <button disabled="{{isDisabled}}" data-start-game>Start game</button>
    </p>
  {{/if}}

  <p>
    <a href="{{pathFor 'home'}}" data-leave>{{#if isHost}}Close game{{else}}Leave{{/if}}</a>
  </p>
</template>

<template name="songPickView">
  <h1>Pick a song for {{displayName focusedUser}}</h1>

  <input type="search" placeholder="Track..." data-search>

  {{#if songs.count}}
    <ul class="song-list" data-songs>
      {{#each songs}}
      <li>{{name}} â€“ {{artist this}}</li>
      {{/each}}
    </ul>
  {{/if}}
</template>
